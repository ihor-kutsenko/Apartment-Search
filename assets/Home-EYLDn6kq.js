import{_,w as k,v as V,o as a,c as l,F as v,r as S,t as h,a as i,b as p,d as y,e as F,f as $,g as d,C,h as g}from"./index-Dl7ltKz6.js";import{C as x,i as B,c as L}from"./validationRules-R6luDedI.js";import{B as N}from"./Button-r431FWID.js";import{R,g as q}from"./apartmentsAPI-hO-VXpj8.js";const w={name:"CustomSelect",props:{items:{type:Array,required:!0},modelValue:{type:String,required:!0}},computed:{selectedValue:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}},formattedItems(){return this.items.map(t=>typeof t=="object"?t:{value:t,label:t})}},methods:{onChange(t){this.$emit("change",t.target.value)}}},U=["value","selected"];function D(t,e,n,f,o,r){return k((a(),l("select",{onChange:e[0]||(e[0]=(...s)=>r.onChange&&r.onChange(...s)),"onUpdate:modelValue":e[1]||(e[1]=s=>r.selectedValue=s),class:"custom-select"},[(a(!0),l(v,null,S(r.formattedItems,s=>(a(),l("option",{key:s.value,value:s.value,selected:s.selected},h(s.label),9,U))),128))],544)),[[V,r.selectedValue]])}const H=_(w,[["render",D],["__scopeId","data-v-fceb04f9"]]),K={components:{CustomSelect:H,CustomInput:x,SubmitButton:N},data(){return{city:"",price:""}},computed:{rules(){return[B,L(10)]},cities(){return[{value:"",label:"City",selected:!0},"Kyiv","Odessa","Poltava","Kharkiv","Dnipro","Lviv","Kherson","Mariupol"]}},methods:{handleSubmit(){this.$emit("submit",{city:this.city,price:this.price})}}};function M(t,e,n,f,o,r){const s=i("CustomSelect"),m=i("CustomInput"),c=i("SubmitButton");return a(),l("form",{class:"form",onSubmit:e[2]||(e[2]=$((...u)=>r.handleSubmit&&r.handleSubmit(...u),["prevent"]))},[p(s,{items:r.cities,modelValue:o.city,"onUpdate:modelValue":e[0]||(e[0]=u=>o.city=u),class:"form__select"},null,8,["items","modelValue"]),p(m,{modelValue:o.price,"onUpdate:modelValue":e[1]||(e[1]=u=>o.price=u),placeholder:"Price from","error-message":"must not be empty",rules:r.rules,class:"form__input"},null,8,["modelValue","rules"]),p(c,{type:"submit",class:"form__submit"},{default:y(()=>[F("Search apartments")]),_:1})],32)}const P=_(K,[["render",M],["__scopeId","data-v-86e9373f"]]),E={name:"ApartmentsItem",components:{StarRating:R},props:{id:{type:String,required:!0},descr:{type:String,default:""},rating:{type:Number,default:0},price:{type:Number,required:!0},imgSrc:{type:String,default:""}},methods:{handleItemClick(){console.log("item clicked")}}},j={class:"apartments-item__inner"},O=["src"],T={class:"apartments-item__content"},z={class:"apartments-item__description"},G={class:"apartments-item__rating"},J={class:"apartments-item__price"};function Q(t,e,n,f,o,r){const s=i("StarRating"),m=i("router-link");return a(),l("div",{class:"apartments-item",onClick:e[0]||(e[0]=(...c)=>r.handleItemClick&&r.handleItemClick(...c))},[d("div",j,[d("img",{src:n.imgSrc,alt:"",class:"apartments-item__photo"},null,8,O),d("div",T,[d("p",z,h(n.descr),1),d("div",G,[p(s,{rating:n.rating},null,8,["rating"])]),d("div",J,"UAH "+h(n.price),1),p(m,{to:{name:"ApartmentPage",params:{id:n.id}},class:"apartments-item__link"},null,8,["to"])])])])}const W=_(E,[["render",Q],["__scopeId","data-v-98b3e408"]]),X={name:"ApartmentsList",components:{ApartmentsItem:W,Container:C},props:{items:{type:Array,default:()=>[]}}},Y={class:"apartments-list"};function Z(t,e,n,f,o,r){const s=i("ApartmentsItem"),m=i("Container");return a(),g(m,null,{default:y(()=>[d("div",Y,[(a(!0),l(v,null,S(n.items,({id:c,descr:u,rating:b,imgUrl:A,price:I})=>(a(),g(s,{key:c,id:c,descr:u,rating:b,imgSrc:A,price:I},null,8,["id","descr","rating","imgSrc","price"]))),128))])]),_:1})}const tt=_(X,[["render",Z],["__scopeId","data-v-9962dac4"]]),et={name:"Homepage",components:{Container:C,ApartmentFilterForm:P,ApartmentsList:tt},data(){return{apartments:[],filters:{city:"",price:""}}},async created(){try{this.apartments=await q()}catch(t){console.error("Error fetching apartments:",t)}},computed:{filteredApartments(){return this.apartments.filter(t=>{const e=!this.filters.city||t.location.city===this.filters.city,n=!this.filters.price||t.price>=Number(this.filters.price);return e&&n})}},methods:{handleFilter(t){this.filters={...this.filters,...t}}}},rt={class:"main"},st={key:0};function nt(t,e,n,f,o,r){const s=i("ApartmentFilterForm"),m=i("ApartmentsList"),c=i("Container");return a(),l("main",rt,[p(c,null,{default:y(()=>[p(s,{onSubmit:r.handleFilter,class:"apartments-filter"},null,8,["onSubmit"]),r.filteredApartments.length?(a(),g(m,{key:1,items:r.filteredApartments},null,8,["items"])):(a(),l("p",st,"No apartments found"))]),_:1})])}const lt=_(et,[["render",nt],["__scopeId","data-v-1a1c7713"]]);export{lt as default};
