import{_ as l,a as i,o as c,c as _,g as a,t as m,b as o,d as v,e as R,p as g,q as f,F as A,r as b,h as y,C as L,n as x}from"./index-Dl7ltKz6.js";import{R as w,a as C}from"./apartmentsAPI-hO-VXpj8.js";import{B as I}from"./Button-r431FWID.js";import{b as q}from"./orders-TCJ_Fhtp.js";const k={name:"ApartmentsInfo",components:{StarRating:w,Button:I},props:{apartment:{type:Object,required:!0}},data(){return{loading:!1}},methods:{async handleApartmentsBooking(){const t={apartmentId:this.$route.params.id,date:Date.now()};try{this.loading=!0,await q(t),this.$notify({type:"success",title:"Order added successfully"})}catch(n){this.$notify({type:"error",title:"Error",text:n.message})}finally{this.loading=!1}}}},B={class:"apartment-info"},O={class:"apartment-info__title-wrapper"},S={class:"apartment-info__title"},F=["src"],H={class:"apartment-info__description"},N={class:"apartment-info__btn"};function D(t,n,e,p,r,s){const d=i("StarRating"),u=i("Button");return c(),_("article",B,[a("div",O,[a("h1",S,m(e.apartment.title),1),o(d,{rating:e.apartment.rating},null,8,["rating"])]),a("img",{src:e.apartment.imgUrl,alt:"",class:"apartment-info__photo"},null,8,F),a("p",H,m(e.apartment.description),1),a("div",N,[o(u,{onClick:s.handleApartmentsBooking,loading:r.loading},{default:v(()=>[R("Book")]),_:1},8,["onClick","loading"])])])}const E=l(k,[["render",D],["__scopeId","data-v-199aec93"]]),T={name:"ApartmentsOwner",props:{owner:{type:Object,required:!0}}},V=t=>(g("data-v-7de274ab"),t=t(),f(),t),j={class:"apartments-owner"},M=V(()=>a("h2",{class:"apartments-owner__title"},"Owner information:",-1)),Z={class:"apartments-owner__info"},G={class:"apartments-owner__info"},J={class:"apartments-owner__info"};function U(t,n,e,p,r,s){return c(),_("section",j,[M,a("p",Z,m(e.owner.name),1),a("p",G,"tel: "+m(e.owner.phone),1),a("p",J,"email: "+m(e.owner.email),1)])}const z=l(T,[["render",U],["__scopeId","data-v-7de274ab"]]),K="data:image/svg+xml,%3csvg%20width='34'%20height='34'%20viewBox='0%200%2034%2034'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Group%2019'%3e%3ccircle%20id='Ellipse%203'%20cx='17'%20cy='17'%20r='17'%20fill='white'/%3e%3ccircle%20id='Ellipse%204'%20cx='17'%20cy='17'%20r='16'%20fill='white'%20stroke='%23FF662D'%20stroke-width='2'/%3e%3cpath%20id='Subtract'%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M4.8053%2028.8444L4.83307%2028.8028C7.04004%2025.4919%2010.7338%2023.5156%2014.712%2023.5156H19.2878C23.2661%2023.5156%2026.9599%2025.4919%2029.1669%2028.8028L29.1946%2028.8445C32.1687%2025.783%2034%2021.6054%2034%2017C34%207.61115%2026.3889%200%2017%200C7.61115%200%200%207.61115%200%2017C0%2021.6053%201.83124%2025.783%204.8053%2028.8444ZM16.9999%207C12.9288%207%209.61713%2010.3117%209.61713%2014.3828C9.61713%2018.4539%2012.9288%2021.7656%2016.9999%2021.7656C21.071%2021.7656%2024.3828%2018.4539%2024.3828%2014.3828C24.3828%2010.3117%2021.071%207%2016.9999%207Z'%20fill='%23FF662D'/%3e%3c/g%3e%3c/svg%3e",P={name:"ReviewsAvatar"},Q={src:K,alt:"avatar"};function W(t,n,e,p,r,s){return c(),_("img",Q)}const X=l(P,[["render",W]]),Y={name:"ReviewsHeading",components:{Rating:w,ReviewsAvatar:X},props:{author:{type:String,required:!0},rating:{type:Number,default:0}}},ee={class:"reviews-heading"},te={class:"reviews-heading__content"},ae={class:"reviews-heading__author"};function se(t,n,e,p,r,s){const d=i("ReviewsAvatar"),u=i("Rating");return c(),_("div",ee,[o(d,{class:"reviews-heading__avatar"}),a("div",te,[a("span",ae,m(e.author),1),o(u,{rating:e.rating},null,8,["rating"])])])}const ne=l(Y,[["render",se],["__scopeId","data-v-bea2c93f"]]),ie={name:"ReviewsItem",components:{ReviewsHeading:ne},props:{review:{type:Object,required:!0}}},re={class:"reviews-item"},oe={class:"reviews-item__content"};function ce(t,n,e,p,r,s){const d=i("ReviewsHeading");return c(),_("section",re,[o(d,{rating:e.review.rating,author:e.review.author},null,8,["rating","author"]),a("p",oe,m(e.review.content),1)])}const de=l(ie,[["render",ce],["__scopeId","data-v-a8f2f4f6"]]),me={name:"ReviewsList",components:{ReviewsItem:de,Rating:w},props:{reviews:{type:Array,required:!0}},data(){return{reviewsLimit:2}},computed:{totalRating(){return this.reviews.reduce((n,e)=>n+e.rating,0)/this.reviews.length},amountOfReviews(){return this.reviews.length},currentReviews(){return this.reviews.slice(0,this.reviewsLimit)},buttonText(){return this.reviewsLimit===this.reviews.length?"Hide":"Read more ..."}},methods:{toggleReviews(){if(this.reviewsLimit===this.reviews.length){this.reviewsLimit=2;return}this.reviewsLimit=this.reviews.length}}},_e=t=>(g("data-v-56cbb9ba"),t=t(),f(),t),ue={class:"reviews"},le={class:"reviews__heading"},pe=_e(()=>a("h2",{class:"reviews__title"},"Total rating",-1)),he={class:"reviews__rating"};function we(t,n,e,p,r,s){const d=i("Rating"),u=i("ReviewsItem");return c(),_("section",ue,[a("div",le,[pe,a("div",he,[a("span",null,m(s.amountOfReviews)+" reviews",1),o(d,{rating:s.totalRating},null,8,["rating"])])]),(c(!0),_(A,null,b(s.currentReviews,h=>(c(),y(u,{key:h.author,review:h},null,8,["review"]))),128)),a("button",{class:"reviews__show-more",onClick:n[0]||(n[0]=(...h)=>s.toggleReviews&&s.toggleReviews(...h))},m(s.buttonText),1)])}const ve=l(me,[["render",we],["__scopeId","data-v-56cbb9ba"]]),ge=[{author:"Alex",content:"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Labore velit reiciendis modi magnam, aliquid architecto cumque saepe recusandae est optio accusamus ducimus itaque assumenda eius culpa earum. Aspernatur, molestiae dicta!",rating:3.5},{author:"Ron",content:"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Labore velit reiciendis modi magnam, aliquid architecto cumque saepe recusandae est optio accusamus ducimus itaque assumenda eius culpa earum. Aspernatur, molestiae dicta!",rating:4.5},{author:"Marry",content:"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Labore velit reiciendis modi magnam, aliquid architecto cumque saepe recusandae est optio accusamus ducimus itaque assumenda eius culpa earum. Aspernatur, molestiae dicta!",rating:4.8},{author:"John",content:"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Labore velit reiciendis modi magnam, aliquid architecto cumque saepe recusandae est optio accusamus ducimus itaque assumenda eius culpa earum. Aspernatur, molestiae dicta!",rating:2.8}],fe={name:"Apartment",components:{Container:L,ApartmentsInfo:E,ApartmentsOwner:z,ApartmentsList:ve},data(){return{apartment:null}},async created(){const{id:t}=this.$route.params;this.apartment=await C(t)},computed:{reviewsList(){return ge}}},$e={class:"apartment-page"},Re={key:0,class:"apartment-page__wrapper"},Ae={class:"apartment-page__additional-info"};function be(t,n,e,p,r,s){const d=i("ApartmentsInfo"),u=i("ApartmentsOwner"),h=i("ApartmentsList"),$=i("Container");return c(),_("main",$e,[o($,null,{default:v(()=>[r.apartment?(c(),_("div",Re,[o(d,{apartment:r.apartment},null,8,["apartment"]),a("div",Ae,[o(u,{owner:r.apartment.owner,class:"apartment-page__owner"},null,8,["owner"]),o(h,{reviews:s.reviewsList},null,8,["reviews"])])])):x("",!0)]),_:1})])}const Ie=l(fe,[["render",be],["__scopeId","data-v-4475551a"]]);export{Ie as default};
