import{_,w as I,v as $,o as a,c,F as v,r as S,t as h,a as i,b as d,d as y,e as F,f as k,g as u,C as b,h as g}from"./index-upleIQY3.js";import{C as x,i as B,c as L}from"./validationRules-7Er76OWK.js";import{B as N}from"./Button-gHuKnLaP.js";import{R,g as q}from"./apartmentsAPI-TqhuwS0c.js";const w={name:"CustomSelect",props:{items:{type:Array,required:!0},modelValue:{type:String,required:!0}},computed:{selectedValue:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}},formattedItems(){return this.items.map(t=>typeof t=="object"?t:{value:t,label:t})}},methods:{onChange(t){this.$emit("change",t.target.value)}}},U=["value","selected"];function D(t,e,n,f,o,r){return I((a(),c("select",{onChange:e[0]||(e[0]=(...s)=>r.onChange&&r.onChange(...s)),"onUpdate:modelValue":e[1]||(e[1]=s=>r.selectedValue=s),class:"custom-select"},[(a(!0),c(v,null,S(r.formattedItems,s=>(a(),c("option",{key:s.value,value:s.value,selected:s.selected},h(s.label),9,U))),128))],544)),[[$,r.selectedValue]])}const H=_(w,[["render",D],["__scopeId","data-v-fceb04f9"]]),K={components:{CustomSelect:H,CustomInput:x,SubmitButton:N},data(){return{city:"",price:""}},computed:{rules(){return[B,L(10)]},cities(){return[{value:"",label:"City",selected:!0},"Kyiv","Odessa","Poltava","Kharkiv","Dnipro","Lviv","Kherson","Mariupol"]}},methods:{handleSubmit(){this.$emit("submit",{city:this.city,price:this.price})}}};function M(t,e,n,f,o,r){const s=i("CustomSelect"),m=i("CustomInput"),p=i("SubmitButton");return a(),c("form",{class:"form",onSubmit:e[2]||(e[2]=k((...l)=>r.handleSubmit&&r.handleSubmit(...l),["prevent"]))},[d(s,{items:r.cities,modelValue:o.city,"onUpdate:modelValue":e[0]||(e[0]=l=>o.city=l),class:"form__select"},null,8,["items","modelValue"]),d(m,{modelValue:o.price,"onUpdate:modelValue":e[1]||(e[1]=l=>o.price=l),placeholder:"Price from","error-message":"must not be empty",rules:r.rules,class:"form__input"},null,8,["modelValue","rules"]),d(p,{type:"submit",class:"form__submit"},{default:y(()=>[F("Search apartments")]),_:1})],32)}const P=_(K,[["render",M],["__scopeId","data-v-86e9373f"]]),E={name:"ApartmentsItem",components:{StarRating:R},props:{id:{type:String,required:!0},descr:{type:String,default:""},rating:{type:Number,default:0},price:{type:Number,required:!0},imgSrc:{type:String,default:""}}},j={class:"apartments-item"},O={class:"apartments-item__inner"},T=["src"],z={class:"apartments-item__content"},G={class:"apartments-item__description"},J={class:"apartments-item__rating"},Q={class:"apartments-item__price"};function W(t,e,n,f,o,r){const s=i("StarRating"),m=i("router-link");return a(),c("div",j,[u("div",O,[u("img",{src:n.imgSrc,alt:"",class:"apartments-item__photo"},null,8,T),u("div",z,[u("p",G,h(n.descr),1),u("div",J,[d(s,{rating:n.rating},null,8,["rating"])]),u("div",Q,"UAH "+h(n.price),1),d(m,{to:{name:"ApartmentPage",params:{id:n.id}},class:"apartments-item__link"},null,8,["to"])])])])}const X=_(E,[["render",W],["__scopeId","data-v-056df06f"]]),Y={name:"ApartmentsList",components:{ApartmentsItem:X,Container:b},props:{items:{type:Array,default:()=>[]}}},Z={class:"apartments-list"};function tt(t,e,n,f,o,r){const s=i("ApartmentsItem"),m=i("Container");return a(),g(m,null,{default:y(()=>[u("div",Z,[(a(!0),c(v,null,S(n.items,({id:p,descr:l,rating:C,imgUrl:A,price:V})=>(a(),g(s,{key:p,id:p,descr:l,rating:C,imgSrc:A,price:V},null,8,["id","descr","rating","imgSrc","price"]))),128))])]),_:1})}const et=_(Y,[["render",tt],["__scopeId","data-v-9962dac4"]]),rt={name:"Homepage",components:{Container:b,ApartmentFilterForm:P,ApartmentsList:et},data(){return{apartments:[],filters:{city:"",price:""}}},async created(){try{this.apartments=await q()}catch(t){console.error("Error fetching apartments:",t)}},computed:{filteredApartments(){return this.apartments.filter(t=>{const e=!this.filters.city||t.location.city===this.filters.city,n=!this.filters.price||t.price>=Number(this.filters.price);return e&&n})}},methods:{handleFilter(t){this.filters={...this.filters,...t}}}},st={class:"main"},nt={key:0};function at(t,e,n,f,o,r){const s=i("ApartmentFilterForm"),m=i("ApartmentsList"),p=i("Container");return a(),c("main",st,[d(p,null,{default:y(()=>[d(s,{onSubmit:r.handleFilter,class:"apartments-filter"},null,8,["onSubmit"]),r.filteredApartments.length?(a(),g(m,{key:1,items:r.filteredApartments},null,8,["items"])):(a(),c("p",nt,"No apartments found"))]),_:1})])}const lt=_(rt,[["render",at],["__scopeId","data-v-1a1c7713"]]);export{lt as default};
